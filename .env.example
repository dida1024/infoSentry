# ============================================
# infoSentry 生产环境配置示例（仓库根目录）
# ============================================
# 使用方法：
#   1. 复制此文件为 .env: cp .env.example .env
#   2. 填写必填项（标注为 required）
#   3. 使用 docker-compose.prod.yml 启动
#
# 注意：此文件用于生产部署。开发环境请使用
#   - /.env.dev（docker-compose.dev.yml）
#   - infoSentry-backend/.env（后端本地运行）
#   - infosentry-web/.env.local（前端本地运行）

# ============================================
# 数据库配置（required: POSTGRES_PASSWORD）
# ============================================
POSTGRES_USER=infosentry
POSTGRES_PASSWORD=
POSTGRES_DB=infosentry
TZ=Asia/Shanghai

# ============================================
# 应用安全配置（required: SECRET_KEY）
# ============================================
SECRET_KEY=

# ============================================
# OpenAI 配置（可选）
# ============================================
OPENAI_API_KEY=
OPENAI_API_BASE=https://api.openai.com/v1
OPENAI_EMBED_MODEL=text-embedding-3-small
OPENAI_JUDGE_MODEL=gpt-4o-mini

# ============================================
# SMTP 配置（可选）
# ============================================
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
SMTP_SSL=false
SMTP_TLS=true
EMAILS_FROM_EMAIL=
EMAILS_FROM_NAME=infoSentry

# ============================================
# 服务地址（建议填写生产域名）
# ============================================
FRONTEND_HOST=
BACKEND_HOST=
BACKEND_CORS_ORIGINS=

# ============================================
# 功能开关
# ============================================
LLM_ENABLED=true
EMBEDDING_ENABLED=true
IMMEDIATE_ENABLED=true
EMAIL_ENABLED=true

# ============================================
# Refresh Token / Session 配置
# ============================================
REFRESH_TOKEN_EXPIRE_DAYS=30
REFRESH_TOKEN_BYTES=64
REFRESH_COOKIE_NAME=refresh_token
REFRESH_COOKIE_PATH=/
REFRESH_COOKIE_DOMAIN=
REFRESH_COOKIE_SECURE=true
REFRESH_COOKIE_HTTPONLY=true
REFRESH_COOKIE_SAMESITE=lax
REFRESH_STRICT_IP=true
REFRESH_STRICT_UA=true
TRUST_PROXY_HEADERS=false

# ============================================
# 预算与速率限制
# ============================================
DAILY_USD_BUDGET=0.33
JUDGE_PER_DAY=200
EMBED_PER_MIN=300
INGEST_LOCK_TTL_SEC=600

# ============================================
# NewsNow 默认公共源同步
# ============================================
NEWSNOW_API_BASE_URL=https://newsnow.busiyi.world
NEWSNOW_API_PATH=/api/s
NEWSNOW_CATALOG_URL=https://raw.githubusercontent.com/ourongxing/newsnow/main/shared/sources.json
NEWSNOW_CATALOG_FETCH_TIMEOUT_SEC=10
NEWSNOW_PUBLIC_SOURCE_SYNC_ON_STARTUP=true
NEWSNOW_PUBLIC_SOURCE_PREFIX=NewsNow |
NEWSNOW_SOURCE_INTERVAL_MIN_SEC=60
NEWSNOW_SOURCE_INTERVAL_MAX_SEC=7200

# ============================================
# Goal 邮件发送与推送默认配置
# ============================================
GOAL_EMAIL_RATE_LIMIT_PER_HOUR=5
GOAL_EMAIL_LOOKBACK_HOURS=24
GOAL_EMAIL_RATE_LIMIT_TTL=3600
DEFAULT_BATCH_WINDOWS=12:30,18:30
DEFAULT_DIGEST_SEND_TIME=09:00

# ============================================
# 日志级别
# ============================================
LOG_LEVEL=INFO
